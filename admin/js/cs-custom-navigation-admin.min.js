(function(b){var a;b('[data-name="hidden-media"]').each(function(){if(this.value){var c=b(this).parents(".field-submenu-image");c.find(".image").removeClass("hidden");c.find('[data-name="add"]').addClass("hidden");c.find('[data-name="edit"]').removeClass("hidden");c.find('[data-name="remove"]').removeClass("hidden")}});b("[data-name='add'], [data-name=\"edit\"], #csnw-media-upload").on("click",function(d){var c=b(this);d.preventDefault();if(a){a.open();return}a=wp.media.frames.file_frame=wp.media({title:"Choose Media",button:{text:"Choose Media"},multiple:false});a.on("select",function(){var h=a.state().get("selection").first().toJSON(),e=c.parents(".field-submenu-image"),g=b(e).find('[data-name="media"]'),f=b(e).find('[data-name="hidden-media"]');f.attr("value",h.id);if(e.find(".image").length!==0){e.find(".image").removeClass("hidden");e.find('[data-name="add"]').addClass("hidden");e.find('[data-name="edit"]').removeClass("hidden");e.find('[data-name="remove"]').removeClass("hidden");g.attr("src",h.sizes.thumbnail.url);g.attr("data-src",h.sizes.thumbnail.url)}e.children(".no-value").addClass("hide");e.children(".has-value").removeClass("hide")});a.open()});b('[data-name="remove"]').on("click",function(f){var d=b(this),c=d.parents(".field-submenu-image"),h=b(c).find('[data-name="media"]'),g=b(c).find('[data-name="hidden-media"]');f.preventDefault();if(c.find(".image").length!==0){h.attr("src","");h.attr("data-src","")}if(c.find(".file-name").length!==0){h.find("span").text("")}g.val("");c.children(".no-value").removeClass("hide");c.children(".has-value").addClass("hide")})})(jQuery);